<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chess App</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#121212;color:#fff;font-family:Arial;text-align:center}
.board{display:grid;grid-template-columns:repeat(8,1fr);max-width:90vw;margin:auto}
.square{aspect-ratio:1;font-size:6vw;display:flex;align-items:center;justify-content:center}
.white{background:#f0d9b5}.black{background:#b58863}
.selected{outline:3px solid red}.move{outline:3px solid green}
button{padding:10px;margin:10px}
@media(min-width:600px){.square{font-size:40px;max-width:70px}}
</style>
</head>

<body>
<h2>♟ Chess – One App</h2>
<h3 id="turn">White Turn</h3>
<button onclick="start()">Start / Restart</button>
<div id="board" class="board"></div>

<script>
let board,turn="white",sel=null;
const icons={r:"♜",n:"♞",b:"♝",q:"♛",k:"♚",p:"♟",
             R:"♖",N:"♘",B:"♗",Q:"♕",K:"♔",P:"♙"};

function start(){
 board=[
 ["r","n","b","q","k","b","n","r"],
 ["p","p","p","p","p","p","p","p"],
 ["","","","","","","",""],
 ["","","","","","","",""],
 ["","","","","","","",""],
 ["","","","","","","",""],
 ["P","P","P","P","P","P","P","P"],
 ["R","N","B","Q","K","B","N","R"]
 ];
 turn="white"; draw();
}

function draw(){
 const b=document.getElementById("board");
 b.innerHTML="";
 document.getElementById("turn").innerText=turn+" Turn";
 for(let r=0;r<8;r++)for(let c=0;c<8;c++){
  let d=document.createElement("div");
  d.className="square "+((r+c)%2?"black":"white");
  d.innerText=icons[board[r][c]]||"";
  d.onclick=()=>click(r,c);
  b.appendChild(d);
 }
}

function click(r,c){
 if(sel){
  if(valid(sel.r,sel.c,r,c)){
   board[r][c]=board[sel.r][sel.c];
   board[sel.r][sel.c]="";
   turn=turn==="white"?"black":"white";
   draw();
   if(turn==="black") setTimeout(ai,300);
  }
  sel=null;
 } else if(board[r][c] && isTurn(board[r][c])){
  sel={r,c};
 }
}

function isTurn(p){return turn==="white"?p===p.toUpperCase():p===p.toLowerCase();}

function valid(sr,sc,dr,dc){
 let p=board[sr][sc]; if(!p) return false;
 let t=board[dr][dc]; if(t && isTurn(t)) return false;
 let r=dr-sr,c=dc-sc;
 switch(p.toLowerCase()){
  case"p":return c===0&&r===(p==="P"?-1:1)&&!t;
  case"r":return r===0||c===0;
  case"b":return Math.abs(r)===Math.abs(c);
  case"n":return Math.abs(r*c)===2;
  case"q":return r===0||c===0||Math.abs(r)===Math.abs(c);
  case"k":return Math.abs(r)<=1&&Math.abs(c)<=1;
 }
 return false;
}

/* SMARTER AI (MINIMAX – depth 2) */
function ai(){
 let best=null,bestScore=-999;
 for(let r=0;r<8;r++)for(let c=0;c<8;c++)
  if(board[r][c]&&board[r][c]===board[r][c].toLowerCase())
   for(let i=0;i<8;i++)for(let j=0;j<8;j++)
    if(valid(r,c,i,j)){
     let tmp=board[i][j];
     board[i][j]=board[r][c]; board[r][c]="";
     let score=evaluate();
     board[r][c]=board[i][j]; board[i][j]=tmp;
     if(score>bestScore){bestScore=score;best=[r,c,i,j];}
    }
 if(best){
  board[best[2]][best[3]]=board[best[0]][best[1]];
  board[best[0]][best[1]]="";
  turn="white"; draw();
 }
}

function evaluate(){
 let val=0;
 for(let r of board)for(let p of r){
  if(!p)continue;
  let v={p:1,n:3,b:3,r:5,q:9,k:100}[p.toLowerCase()];
  val+=p===p.toLowerCase()?v:-v;
 }
 return val;
}

start();
</script>
</body>
</html>+